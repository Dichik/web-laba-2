{"ast":null,"code":"import _regeneratorRuntime from\"/home/dichik/PhpstormProjects/web-laba-2/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dichik/PhpstormProjects/web-laba-2/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/dichik/PhpstormProjects/web-laba-2/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import{useState}from\"react\";import Spinner from\"./Spinner\";import emailjs from'emailjs-com';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),textMessage=_useState6[0],setTextMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),submitBlocked=_useState8[0],setSubmitBlocked=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),activeField=_useState10[0],setActiveField=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var regEmail=/^[a-zA-Z-0-9]+@[a-zA-Z-0-9]+\\.[A-Za-z]+$/;var showErrorMessage=function showErrorMessage(str,errorNumber){if(errorNumber===1){alert(\"There is an empty string...\");}else if(errorNumber===2){alert(\"There is something wrong with your email...\");}else if(errorNumber===3){alert(str);}};var notEmpty=function notEmpty(str){if(str===\"\"){showErrorMessage(str,1);return false;}return true;};var checkEmail=function checkEmail(){if(!regEmail.test(email)){showErrorMessage(email,2);return false;}return true;};var wait=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setTimeout(function(){return console.log(\"Loading...\");},5000);case 1:case\"end\":return _context.stop();}}},_callee);}));return function wait(){return _ref.apply(this,arguments);};}();var submitData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(submitBlocked){_context2.next=11;break;}setSubmitBlocked(true);if(!(notEmpty(name)&&notEmpty(textMessage)&&checkEmail())){_context2.next=10;break;}setLoading(true);_context2.next=6;return wait();case 6:_context2.next=8;return sendEmail(name,email,textMessage);case 8:_context2.next=11;break;case 10:setSubmitBlocked(false);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function submitData(){return _ref2.apply(this,arguments);};}();// TODO ліміт запитів до 1000\nvar resetData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setName(\"\");setEmail(\"\");setTextMessage(\"\");setSubmitBlocked(false);setActiveField(0);setLoading(false);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function resetData(){return _ref3.apply(this,arguments);};}();var allFieldsEmpty=function allFieldsEmpty(){return email===\"\"&&name===\"\"&&textMessage===\"\";};var showMessageAboutSuccess=function showMessageAboutSuccess(){alert(\"Your message was successfully sent\");resetData();};var sendEmail=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var form;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:emailjs.init(\"user_AJGy3zMpNl2Rxs4CFFafD\");form={name:name,email:email,textMessage:textMessage};emailjs.send('service_tauvzqc','template_26nh4ab',form).then(function(result){console.log(result.text);showMessageAboutSuccess();},function(error){console.log(error.text);showErrorMessage(\"Error, your message wasn't sent\",3);});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function sendEmail(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:!loading?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"headerClass\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Sending message\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",placeholder:\"Enter your name\",className:\"inputField nameInputField centerBlock\",value:name,onChange:function onChange(event){return setName(event.target.value);},onFocus:function onFocus(){return setActiveField(1);},onBlur:function onBlur(){return setActiveField(0);},style:{borderBottom:activeField===1?'3px solid #10fc2a':null}// TODO light-green color if a field is filled\n}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Enter your email\",value:email,onChange:function onChange(event){return setEmail(event.target.value);},onFocus:function onFocus(){return setActiveField(2);},onBlur:function onBlur(){return setActiveField(0);},style:{borderBottom:activeField===2?'3px solid #10fc2a':null},className:\"inputField emailInputField centerBlock\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your message here\",value:textMessage,onChange:function onChange(event){return setTextMessage(event.target.value);},className:\"inputField textField centerBlock\",onFocus:function onFocus(){return setActiveField(3);},onBlur:function onBlur(){return setActiveField(0);},style:{borderBottom:activeField===3?'3px solid #10fc2a':null}}),/*#__PURE__*/_jsx(\"button\",{className:\"centerBlock submitButton\",onClick:submitData,disabled:submitBlocked,style:{background:submitBlocked?'#05acbb':null},children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"centerBlock resetButton\",disabled:allFieldsEmpty(),onClick:resetData,children:\"Clear\"})]}):Spinner()});}export default App;","map":{"version":3,"sources":["/home/dichik/PhpstormProjects/web-laba-2/my-app/src/App.js"],"names":["useState","Spinner","emailjs","App","name","setName","email","setEmail","textMessage","setTextMessage","submitBlocked","setSubmitBlocked","activeField","setActiveField","loading","setLoading","regEmail","showErrorMessage","str","errorNumber","alert","notEmpty","checkEmail","test","wait","setTimeout","console","log","submitData","sendEmail","resetData","allFieldsEmpty","showMessageAboutSuccess","init","form","send","then","result","text","error","event","target","value","borderBottom","background"],"mappings":"+eAAA,MAAO,WAAP,CACA,OAAQA,QAAR,KAAuB,OAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,aAApB,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACX,cAAwBH,QAAQ,CAAC,EAAD,CAAhC,wCAAOI,IAAP,eAAaC,OAAb,eACA,eAA0BL,QAAQ,CAAC,EAAD,CAAlC,yCAAOM,KAAP,eAAcC,QAAd,eACA,eAAsCP,QAAQ,CAAC,EAAD,CAA9C,yCAAOQ,WAAP,eAAoBC,cAApB,eACA,eAA0CT,QAAQ,CAAC,KAAD,CAAlD,yCAAOU,aAAP,eAAsBC,gBAAtB,eACA,eAAsCX,QAAQ,CAAC,CAAD,CAA9C,0CAAOY,WAAP,gBAAoBC,cAApB,gBACA,gBAA8Bb,QAAQ,CAAC,KAAD,CAAtC,2CAAOc,OAAP,gBAAgBC,UAAhB,gBAEA,GAAIC,CAAAA,QAAQ,CAAG,0CAAf,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,GAAD,CAAMC,WAAN,CAAsB,CAC3C,GAAGA,WAAW,GAAK,CAAnB,CAAsB,CAClBC,KAAK,CAAC,6BAAD,CAAL,CACH,CAFD,IAEO,IAAGD,WAAW,GAAK,CAAnB,CAAsB,CACzBC,KAAK,CAAC,6CAAD,CAAL,CACH,CAFM,IAEA,IAAGD,WAAW,GAAK,CAAnB,CAAsB,CACzBC,KAAK,CAACF,GAAD,CAAL,CACH,CACJ,CARD,CAUA,GAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACH,GAAD,CAAS,CACtB,GAAGA,GAAG,GAAK,EAAX,CAAe,CACXD,gBAAgB,CAACC,GAAD,CAAM,CAAN,CAAhB,CACA,MAAO,MAAP,CACH,CACD,MAAO,KAAP,CACH,CAND,CAQA,GAAMI,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAG,CAACN,QAAQ,CAACO,IAAT,CAAcjB,KAAd,CAAJ,CAA0B,CACtBW,gBAAgB,CAACX,KAAD,CAAQ,CAAR,CAAhB,CACA,MAAO,MAAP,CACH,CACD,MAAO,KAAP,CACH,CAND,CAQA,GAAMkB,CAAAA,IAAI,0FAAG,mIACTC,UAAU,CAAC,iBAAMC,CAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN,EAAD,CAAkC,IAAlC,CAAV,CADS,sDAAH,kBAAJH,CAAAA,IAAI,0CAAV,CAIA,GAAMI,CAAAA,UAAU,2FAAG,2IACVlB,aADU,2BAEXC,gBAAgB,CAAC,IAAD,CAAhB,CAFW,KAGPU,QAAQ,CAACjB,IAAD,CAAR,EAAkBiB,QAAQ,CAACb,WAAD,CAA1B,EAA2Cc,UAAU,EAH9C,4BAIPP,UAAU,CAAC,IAAD,CAAV,CAJO,uBAKDS,CAAAA,IAAI,EALH,+BAMDK,CAAAA,SAAS,CAACzB,IAAD,CAAOE,KAAP,CAAcE,WAAd,CANR,wCAOJG,gBAAgB,CAAC,KAAD,CAAhB,CAPI,yDAAH,kBAAViB,CAAAA,UAAU,2CAAhB,CAWA;AAEA,GAAME,CAAAA,SAAS,2FAAG,wIACdzB,OAAO,CAAC,EAAD,CAAP,CACAE,QAAQ,CAAC,EAAD,CAAR,CACAE,cAAc,CAAC,EAAD,CAAd,CACAE,gBAAgB,CAAC,KAAD,CAAhB,CACAE,cAAc,CAAC,CAAD,CAAd,CACAE,UAAU,CAAC,KAAD,CAAV,CANc,wDAAH,kBAATe,CAAAA,SAAS,2CAAf,CASA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,MAAQzB,CAAAA,KAAK,GAAK,EAAV,EAAgBF,IAAI,GAAK,EAAzB,EAA+BI,WAAW,GAAK,EAAvD,CACH,CAFD,CAIA,GAAMwB,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,EAAM,CAClCZ,KAAK,CAAC,oCAAD,CAAL,CACAU,SAAS,GACZ,CAHD,CAKA,GAAMD,CAAAA,SAAS,2FAAG,iJACd3B,OAAO,CAAC+B,IAAR,CAAa,4BAAb,EACIC,IAFU,CAEH,CACP9B,IAAI,CAAEA,IADC,CAEPE,KAAK,CAAEA,KAFA,CAGPE,WAAW,CAAEA,WAHN,CAFG,CAOdN,OAAO,CAACiC,IAAR,CAAa,iBAAb,CAAgC,kBAAhC,CAAoDD,IAApD,EACKE,IADL,CACU,SAACC,MAAD,CAAY,CACdX,OAAO,CAACC,GAAR,CAAYU,MAAM,CAACC,IAAnB,EACAN,uBAAuB,GAC1B,CAJL,CAIO,SAACO,KAAD,CAAW,CACVb,OAAO,CAACC,GAAR,CAAYY,KAAK,CAACD,IAAlB,EACArB,gBAAgB,CAAC,iCAAD,CAAoC,CAApC,CAAhB,CACH,CAPL,EAPc,wDAAH,kBAATY,CAAAA,SAAS,2CAAf,CAiBF,mBACI,qBACM,CAACf,OAAD,cACF,oCACI,eAAQ,SAAS,CAAE,aAAnB,uBACI,uCADJ,EADJ,cAII,cAAO,IAAI,CAAE,MAAb,CAAqB,WAAW,CAAE,iBAAlC,CACO,SAAS,CAAE,uCADlB,CAEO,KAAK,CAAEV,IAFd,CAGO,QAAQ,CAAE,kBAAAoC,KAAK,QAAInC,CAAAA,OAAO,CAACmC,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,EAHtB,CAIO,OAAO,CAAE,yBAAM7B,CAAAA,cAAc,CAAC,CAAD,CAApB,EAJhB,CAKO,MAAM,CAAE,wBAAMA,CAAAA,cAAc,CAAC,CAAD,CAApB,EALf,CAMO,KAAK,CAAE,CACH8B,YAAY,CAAE/B,WAAW,GAAK,CAAhB,CAAoB,mBAApB,CAA0C,IADrD,CAGV;AATJ,EAJJ,cAeI,cAAO,IAAI,CAAE,OAAb,CAAsB,WAAW,CAAE,kBAAnC,CACO,KAAK,CAAEN,KADd,CAEO,QAAQ,CAAG,kBAAAkC,KAAK,QAAIjC,CAAAA,QAAQ,CAACiC,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAZ,EAFvB,CAGO,OAAO,CAAE,yBAAM7B,CAAAA,cAAc,CAAC,CAAD,CAApB,EAHhB,CAIO,MAAM,CAAE,wBAAMA,CAAAA,cAAc,CAAC,CAAD,CAApB,EAJf,CAKO,KAAK,CAAE,CACH8B,YAAY,CAAE/B,WAAW,GAAK,CAAhB,CAAoB,mBAApB,CAA0C,IADrD,CALd,CAQO,SAAS,CAAE,wCARlB,EAfJ,cA0BI,cAAO,IAAI,CAAE,MAAb,CAAqB,WAAW,CAAE,yBAAlC,CACO,KAAK,CAAEJ,WADd,CAEO,QAAQ,CAAE,kBAAAgC,KAAK,QAAI/B,CAAAA,cAAc,CAAC+B,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAlB,EAFtB,CAGO,SAAS,CAAE,kCAHlB,CAIO,OAAO,CAAE,yBAAM7B,CAAAA,cAAc,CAAC,CAAD,CAApB,EAJhB,CAKO,MAAM,CAAE,wBAAMA,CAAAA,cAAc,CAAC,CAAD,CAApB,EALf,CAMO,KAAK,CAAE,CACH8B,YAAY,CAAE/B,WAAW,GAAK,CAAhB,CAAoB,mBAApB,CAA0C,IADrD,CANd,EA1BJ,cAoCI,eAAQ,SAAS,CAAE,0BAAnB,CACQ,OAAO,CAAEgB,UADjB,CAEQ,QAAQ,CAAElB,aAFlB,CAGQ,KAAK,CAAE,CACHkC,UAAU,CAAElC,aAAa,CAAG,SAAH,CAAe,IADrC,CAHf,oBApCJ,cA6CI,eAAQ,SAAS,CAAE,yBAAnB,CACQ,QAAQ,CAAEqB,cAAc,EADhC,CAEQ,OAAO,CAAED,SAFjB,mBA7CJ,GADE,CAmDO7B,OAAO,EApDpB,EADJ,CAyDD,CAED,cAAeE,CAAAA,GAAf","sourcesContent":["import './App.css';\nimport {useState} from \"react\";\nimport Spinner from \"./Spinner\";\nimport emailjs from 'emailjs-com'\n\nfunction App() {\n    const [name, setName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [textMessage, setTextMessage] = useState(\"\");\n    const [submitBlocked, setSubmitBlocked] = useState(false);\n    const [activeField, setActiveField] = useState(0);\n    const [loading, setLoading] = useState(false);\n\n    let regEmail = /^[a-zA-Z-0-9]+@[a-zA-Z-0-9]+\\.[A-Za-z]+$/\n\n    const showErrorMessage = (str, errorNumber) => {\n        if(errorNumber === 1) {\n            alert(\"There is an empty string...\");\n        } else if(errorNumber === 2) {\n            alert(\"There is something wrong with your email...\");\n        } else if(errorNumber === 3) {\n            alert(str)\n        }\n    }\n\n    const notEmpty = (str) => {\n        if(str === \"\") {\n            showErrorMessage(str, 1);\n            return false;\n        }\n        return true;\n    }\n\n    const checkEmail = () => {\n        if(!regEmail.test(email)) {\n            showErrorMessage(email, 2)\n            return false;\n        }\n        return true;\n    }\n\n    const wait = async () => {\n        setTimeout(() => console.log(\"Loading...\"), 5000)\n    }\n\n    const submitData = async () => {\n        if (!submitBlocked) {\n            setSubmitBlocked(true);\n            if (notEmpty(name) && notEmpty(textMessage) && checkEmail()) {\n                setLoading(true)\n                await wait()\n                await sendEmail(name, email, textMessage)\n            } else setSubmitBlocked(false);\n        }\n    }\n\n    // TODO ліміт запитів до 1000\n\n    const resetData = async () => {\n        setName(\"\");\n        setEmail(\"\");\n        setTextMessage(\"\");\n        setSubmitBlocked(false);\n        setActiveField(0);\n        setLoading(false)\n    }\n\n    const allFieldsEmpty = () => {\n        return (email === \"\" && name === \"\" && textMessage === \"\");\n    }\n\n    const showMessageAboutSuccess = () => {\n        alert(\"Your message was successfully sent\")\n        resetData()\n    }\n\n    const sendEmail = async () => {\n        emailjs.init(\"user_AJGy3zMpNl2Rxs4CFFafD\");\n        let form = {\n            name: name,\n            email: email,\n            textMessage: textMessage\n        }\n        emailjs.send('service_tauvzqc', 'template_26nh4ab', form)\n            .then((result) => {\n                console.log(result.text);\n                showMessageAboutSuccess();\n            }, (error) => {\n                console.log(error.text);\n                showErrorMessage(\"Error, your message wasn't sent\", 3)\n            });\n    }\n\n  return (\n      <div>\n          { !loading ?\n          <div>\n              <header className={\"headerClass\"}>\n                  <h1>Sending message</h1>\n              </header>\n              <input type={\"name\"} placeholder={\"Enter your name\"}\n                     className={\"inputField nameInputField centerBlock\"}\n                     value={name}\n                     onChange={event => setName(event.target.value)}\n                     onFocus={() => setActiveField(1)}\n                     onBlur={() => setActiveField(0)}\n                     style={{\n                         borderBottom: activeField === 1 ? '3px solid #10fc2a' : null\n                     }}\n                  // TODO light-green color if a field is filled\n              />\n              <input type={\"email\"} placeholder={\"Enter your email\"}\n                     value={email}\n                     onChange={(event => setEmail(event.target.value))}\n                     onFocus={() => setActiveField(2)}\n                     onBlur={() => setActiveField(0)}\n                     style={{\n                         borderBottom: activeField === 2 ? '3px solid #10fc2a' : null\n                     }}\n                     className={\"inputField emailInputField centerBlock\"}\n              />\n              {/*TODO red color if a field has error for a 3 seconds*/}\n              <input type={\"text\"} placeholder={\"Enter your message here\"}\n                     value={textMessage}\n                     onChange={event => setTextMessage(event.target.value)}\n                     className={\"inputField textField centerBlock\"}\n                     onFocus={() => setActiveField(3)}\n                     onBlur={() => setActiveField(0)}\n                     style={{\n                         borderBottom: activeField === 3 ? '3px solid #10fc2a' : null\n                     }}\n              />\n              <button className={\"centerBlock submitButton\"}\n                      onClick={submitData}\n                      disabled={submitBlocked}\n                      style={{\n                          background: submitBlocked ? '#05acbb' : null\n                      }}\n              >\n                  Submit\n              </button>\n              <button className={\"centerBlock resetButton\"}\n                      disabled={allFieldsEmpty()}\n                      onClick={resetData}>\n                  Clear\n              </button>\n          </div> : Spinner()\n          }\n      </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}